---
import '../styles/global.css'; // Asegúrate de tener un archivo CSS para los estilos
import clientes from '../lib/clientes.json';

interface Cliente {
  id: number;
  nombre: string;
  empresa: string;
  estado: string;
  last_contact: string;
  total_gastado: number;
}

interface ClientesData {
  año: number;
  clientes_destacados: Cliente[];
}

// Convertir el JSON importado al tipo ClientesData para asegurar la tipificación correcta
const clientesData: ClientesData[] = clientes;

// Definir estilos CSS con un objeto tipado para el estado
const styles = {
  container: 'max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md',
  header: 'text-2xl font-bold mb-4',
  nav: 'flex space-x-4 mb-4 text-gray-500',
  navItem: 'cursor-pointer hover:text-black',
  search: 'mb-4',
  table: 'w-full border-collapse',
  th: 'border-b p-2 text-left font-semibold',
  td: 'border-b p-2',
  button: 'bg-black text-white px-4 py-2 rounded hover:bg-gray-800',
  status: {
    activo: 'bg-green-500 text-white px-2 py-1 rounded',
    inactivo: 'bg-gray-500 text-white px-2 py-1 rounded',
    lead: 'bg-blue-500 text-white px-2 py-1 rounded'
  } as Record<Cliente['estado'], string> // Tipar el objeto de estado con los valores posibles de "estado"
};
---

<div class={styles.container}>
  <h1 class={styles.header}>CRM Dashboard</h1>

  {/* ... (resto del código del dashboard) ... */}

  <table class={styles.table}>
    <thead>
      {/* ... (encabezados de la tabla) ... */}
    </thead>
    <tbody>
      {clientesData.map((data) =>
        data.clientes_destacados.map((cliente) => (
          <tr> <!-- Eliminado el atributo `key` -->
            <td class={styles.td}>
              <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-gray-200 rounded-full"></div>
                <div>
                  <p>{cliente.nombre}</p>
                  <p class="text-gray-500 text-sm">{cliente.empresa}</p>
                </div>
              </div>
            </td>
            <td class={styles.td}>
              <span class={styles.status[cliente.estado.toLowerCase()]}>
                {cliente.estado}
              </span>
            </td>
            <td class={styles.td}>{cliente.last_contact}</td>
            <td class={styles.td}>${cliente.total_gastado.toLocaleString()}</td>
            <td class={styles.td}>...</td>
          </tr>
        ))
      )}
    </tbody>
  </table>
</div>