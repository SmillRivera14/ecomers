---
import Layout from '../layouts/Layout.astro';

// Datos simulados para las métricas y el histograma
const metrics = {
  totalCustomers: 1248,
  activeDeals: 324,
  revenue: 45231.89,
  customerSatisfaction: 92,
  growth: {
    totalCustomers: 12,
    activeDeals: 4,
    revenue: 20.1,
    customerSatisfaction: 2,
  },
};

const salesData = [
  { month: 'Jan', sales: 10000 },
  { month: 'Feb', sales: 12000 },
  { month: 'Mar', sales: 15000 },
  { month: 'Apr', sales: 18000 },
  { month: 'May', sales: 20000 },
  { month: 'Jun', sales: 25000 },
  { month: 'Jul', sales: 30000 },
  { month: 'Aug', sales: 35000 },
  { month: 'Sep', sales: 40000 },
  { month: 'Oct', sales: 45000 },
  { month: 'Nov', sales: 50000 },
  { month: 'Dec', sales: 70000 },
];

const recentSales = [
  { name: 'Olivia Martin', email: 'olivia.martin@email.com', amount: 1999.00 },
  { name: 'Jackson Lee', email: 'jackson.lee@email.com', amount: 39.00 },
  { name: 'Isabella Nguyen', email: 'isabella.nguyen@email.com', amount: 299.00 },
  { name: 'William Kim', email: 'william.kim@email.com', amount: 99.00 },
  { name: 'Sofia Davis', email: 'sofia.davis@email.com', amount: 39.00 },
];
---

<Layout title="Sales Dashboard">
  <div class="dashboard">
    <!-- Sección de métricas -->
    <div class="metrics">
      <div class="metric-card">
        <h3>Total Customers</h3>
        <p class="value">{metrics.totalCustomers.toLocaleString()}</p>
        <p class="growth">+{metrics.growth.totalCustomers}% from last month</p>
      </div>
      <div class="metric-card">
        <h3>Active Deals</h3>
        <p class="value">{metrics.activeDeals}</p>
        <p class="growth">+{metrics.growth.activeDeals}% from last month</p>
      </div>
      <div class="metric-card">
        <h3>Revenue</h3>
        <p class="value">${metrics.revenue.toLocaleString()}</p>
        <p class="growth">+{metrics.growth.revenue}% from last month</p>
      </div>
      <div class="metric-card">
        <h3>Customer Satisfaction</h3>
        <p class="value">{metrics.customerSatisfaction}%</p>
        <p class="growth">+{metrics.growth.customerSatisfaction}% from last month</p>
      </div>
    </div>

    <!-- Sección de Sales Overview y Recent Sales -->
    <div class="content">
      <!-- Sales Overview (Histograma) -->
      <div class="sales-overview">
        <h2>Sales Overview</h2>
        <div class="histogram">
          {salesData.map((data) => (
            <div class="bar" style={`height: ${(data.sales / 80000) * 300}px;`}>
              <span class="bar-label">{data.month}</span>
            </div>
          ))}
        </div>
        <div class="y-axis">
          <span>$80K</span>
          <span>$60K</span>
          <span>$40K</span>
          <span>$20K</span>
          <span>$0K</span>
        </div>
      </div>

      <!-- Recent Sales -->
      <div class="recent-sales">
        <h2>Recent Sales</h2>
        <p>You made 265 sales this month.</p>
        <ul>
          {recentSales.map((sale) => (
            <li>
              <div class="sale-info">
                <div class="avatar"></div>
                <div>
                  <p class="name">{sale.name}</p>
                  <p class="email">{sale.email}</p>
                </div>
              </div>
              <p class="amount">+${sale.amount.toLocaleString()}</p>
            </li>
          ))}
        </ul>
      </div>
    </div>
  </div>
</Layout>

<style>
  .dashboard {
    padding: 20px;
    font-family: Arial, sans-serif;
  }

  .metrics {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
  }

  .metric-card {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    flex: 1;
  }

  .metric-card h3 {
    margin: 0;
    font-size: 14px;
    color: #666;
  }

  .metric-card .value {
    font-size: 24px;
    font-weight: bold;
    margin: 10px 0;
  }

  .metric-card .growth {
    color: #28a745;
    font-size: 12px;
  }

  .content {
    display: flex;
    gap: 20px;
  }

  .sales-overview {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    flex: 2;
  }

  .sales-overview h2 {
    margin: 0 0 20px 0;
  }

  .histogram {
    display: flex;
    gap: 5px;
    height: 300px;
    align-items: flex-end;
  }

  .bar {
    background: #333;
    width: 20px;
    border-radius: 4px 4px 0 0;
    position: relative;
  }

  .bar-label {
    position: absolute;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
  }

  .y-axis {
    position: absolute;
    left: 0;
    top: 0;
    height: 300px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    font-size: 12px;
    color: #666;
  }

  .recent-sales {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    flex: 1;
  }

  .recent-sales h2 {
    margin: 0 0 10px 0;
  }

  .recent-sales p {
    margin: 0 0 20px 0;
    color: #666;
  }

  .recent-sales ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .recent-sales li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid #eee;
  }

  .sale-info {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .avatar {
    width: 40px;
    height: 40px;
    background: #ddd;
    border-radius: 50%;
  }

  .name {
    font-weight: bold;
    margin: 0;
  }

  .email {
    color: #666;
    font-size: 12px;
    margin: 0;
  }

  .amount {
    font-weight: bold;
    color: #28a745;
  }
</style>